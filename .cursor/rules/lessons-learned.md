# 踩过的坑（复利工程）

> 基于 Boris Cherny "Claude Code 之父" 的理念：**每次犯错都记录，让 AI 永不再犯**
> 
> 规则：每次 AI 犯错 → 加一条 → 成为团队资产

---

## 🔴 Windows / Git Bash 环境

### 命令分隔符
- **日期**: 2025-12-xx
- **问题**: 用 `&&` 连接多个命令报错
- **原因**: Windows Git Bash 不完全支持 `&&` 语法
- **规则**: **永远用分号 `;` 分隔命令**
```bash
# ❌ 错误
cd project && npm start

# ✅ 正确
cd project; npm start
```

### Heredoc 语法
- **问题**: Heredoc (`<<EOF`) 在 Windows 上行为不一致
- **规则**: **不用 heredoc，用 echo 或直接写文件**

### 路径空格
- **问题**: 路径含空格时命令失败
- **规则**: **路径永远用引号包裹**
```bash
# ❌ 错误
cd C:\Users\WIN\Desktop\Cursor Project

# ✅ 正确
cd "C:\Users\WIN\Desktop\Cursor Project"
```

---

## 🔴 PM Tools 截图排序

### 截图顺序是绝对的
- **日期**: 2025-12-xx
- **问题**: 按分类分组后，截图顺序被打乱
- **原因**: 分组逻辑优先于编号顺序
- **规则**: 
  - Screen_001 → 002 → 003 的顺序**永远不能改变**
  - 分类（Stage/Module/Feature）**只是标签**，不影响展示顺序
  - 分组展示时，分组顺序按该分组**第一次出现的截图编号**排序

---

## 🔴 UI 设计 (PM Tools)

### 禁止的样式
- **紫色渐变背景** ❌
- **Emoji 作为 UI 图标** ❌
- **整体 opacity 降低** ❌ → 用 `filter: brightness()` 代替
- **彩色实心按钮** ❌ → 用透明背景 + 边框

### 正确的样式
```css
/* 背景 */
background: #0a0a0a;           /* 主背景 */
background: #111 / #1a1a1a;    /* 卡片背景 */

/* 边框 */
border: 1px solid rgba(255,255,255,0.06);  /* 默认 */
border: 1px solid rgba(255,255,255,0.15);  /* hover */
border: 1px solid #fff;                     /* 选中 */

/* 图片亮度 */
filter: brightness(0.35);  /* 非选中 */
filter: brightness(0.6);   /* hover */
filter: brightness(1);     /* 选中 */
```

---

## 🔴 数据源精度

### 禁止近似值
- **问题**: 把 Figma 的 `-2.08%` 转换成 `-2px`
- **规则**: 
  - 有精确数据源时，**禁止使用经验值或近似值**
  - 写包含数值的代码前，**必须先输出数据对照表**
  - 数据源值 = 代码中的值，不一致必须解释原因

---

## 🔴 NogicOS 产品定位

### 禁止提及的概念
- **日期**: 2025-12-xx
- **原因**: 用户明确要求删除，这些概念已从所有文档移除
- **禁止**:
  - ❌ "越用越快" / "Gets faster"
  - ❌ "Smart Router" / "Skill Path" / "Fast Path"
  - ❌ "集体学习" / "Network Effect"
  - ❌ "学习轨迹" / "Learning Loop"

### 正确的定位
- **一句话**: "The AI that works where you work"
- **核心差异化**: 完整上下文（浏览器 + 文件 + 桌面）
- **三大卖点**: Complete Context, Direct Action, Local-First

---

## 🔴 代码习惯

### 查文档再写代码
- **问题**: 直接写代码，用了过时的 API
- **规则**: `/check` 强制并行查 Context7 + DeepWiki + WebSearch

### 先规划再动手
- **问题**: 直接动手，方向错了返工成本高
- **规则**: 复杂任务先输出执行计划，确认后再动手

---

## 🟣 模式缺陷（高阶行为问题）

> 这里记录的不是具体错误，而是**行为模式**的问题
> 这类问题会在不同场景反复出现

### 改了半天改不好
- **模式**: 反复尝试同一类方法，没有停下来重新分析
- **根因**: 太急着动手，没有系统理解问题
- **规则**: 
  - **3 次尝试规则**：同一个问题尝试 3 次仍未解决 → 必须停下来
  - 输出"我在做什么、为什么没效果、缺少什么"
  - 等待用户指导，不要继续盲目尝试

### 改了但没效果
- **模式**: 代码改了，但 UI/行为没变化
- **根因**: 可能改错文件、缓存问题、或根本没理解问题在哪
- **规则**:
  - 改之前先确认"我要改的是这个文件吗？"
  - 改之后用浏览器工具验证
  - 没效果时，先检查是否有缓存/热更新问题

### 方向错了还在继续
- **模式**: 用户已经暗示不满，但 AI 还在同一个方向尝试
- **根因**: 没有识别用户的挫败感信号
- **规则**:
  - 识别信号词："还是不对"/"又错了"/"改了半天"/"算了"
  - 触发后立即停下，切换到反思模式

---

## 📝 自动记录机制

### 类型 1：具体错误
**触发**：Zino 纠正具体的技术错误
**动作**：立即写入，汇报"已记录"

### 类型 2：模式缺陷 ⭐
**触发**：
- 同一个问题尝试 3+ 次仍未解决
- Zino 说"改了半天"/"还是不对"/"又错了"
- 感觉在打转，没有进展

**动作**：
1. **立即停下来**（不要继续尝试）
2. **反思并输出**：
   ```
   🔴 检测到模式缺陷
   
   我在做什么：[描述当前的尝试]
   为什么没效果：[分析根本原因]
   缺少什么：[我可能缺少的信息/理解]
   
   建议：
   - 选项 A：[换个角度]
   - 选项 B：[需要你提供更多信息]
   - 选项 C：[承认超出能力，建议其他方案]
   ```
3. **等待 Zino 指导**
4. **问题解决后**：记录模式缺陷到下方

**格式**：
```markdown
### [错误描述]
- **日期**: YYYY-MM-DD
- **问题**: [具体问题]
- **原因**: [为什么会出错]
- **规则**: [以后怎么避免]
```

---

## 更新日志

| 日期 | 内容 |
|------|------|
| 2026-01-05 | 初始化，整理现有规则中的错误记录 |

